<div class="flex-row fullscreen">
  <div class="flex-1 fullheightpercent">
    <div class="menu">
      <div class="menuopt firstmenuopt">
        {{currentorder==null?"--:--":currentorder.timestr}}
      </div>
      <div class="menuopt" [tooltip]="cameraopen==true?'关闭摄像头':'打开摄像头'" placement="right" (click)="toggleCamera()">
        <i class="fas fa-fw fa-video"></i>
        <i class="fa fa-ban fa-stack-1x text-danger" *ngIf="cameraopen==true"></i>
      </div>
      <div class="menuopt" [tooltip]="micopen==true?'关闭麦克风':'打开麦克风'" placement="right" (click)="toggleMic()">
        <i class="fas fa-fw fa-microphone"></i>
        <i class="fa fa-ban fa-stack-1x text-danger" *ngIf="micopen==true"></i>
      </div>
      <div class="menuopt" tooltip="病人信息" placement="right" (click)="showtype=1">
        <i class="fas fa-fw fa-users"></i>
      </div>
      <div class="menuopt" tooltip="聊天记录" placement="right" (click)="showtype=2">
        <i class="fas fa-fw fa-comments"></i>
      </div>
      <div class="menuopt lastmenuopt" tooltip="设备设置" placement="right" (click)="showtype=3">
        <i class="fas fa-fw fa-cog"></i>
      </div>
      <div *ngIf="false" class="menuopt lastmenuopt" [tooltip]="play==true?'停止直播':'开始直播'" placement="right">
        <i class="fas fa-fw fa-play" *ngIf="play==false" (click)='startlive()'></i>
        <i class="fas fa-fw fa-stop" *ngIf="play==true" (click)='stoplive()'></i>
      </div>
    </div>
    <video controls="controls" class='fullpercent' id="remotevideo"></video>
    <video class="localvideo" muted=“muted” controls="controls" id="localvideo"></video>
  </div>

  <div class="fullheightpercent scroll">
    <div class=" padding-20" *ngIf="showtype==1">
      <div *ngIf="currentorder==null">
        <div class="h3 mt-4 text-gray-800"><b>我的病人</b></div>
        <div class="order padding-20 bg-white margin-top" *ngFor="let order of orderlist">
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约人姓名：</div>
            <div class="f12">{{order.patientname}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约人性别：</div>
            <div class="f12">{{order.patientgender_name}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约时间：</div>
            <div class="f12">{{order.ordertime_formatting}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约状态：</div>
            <div class="f12">{{order.orderstatus_name}}</div>
          </div>
          <div class="flex-row" *ngIf="order.orderstatus=='B'||order.orderstatus=='C'">
              <div class="txt-gray f12 margin-right">开始时间：</div>
              <div class="f12">{{order.meetingstart_formatting}}</div>
          </div>
          <div class="flex-row" *ngIf="order.orderstatus=='C'">
              <div class="txt-gray f12 margin-right">结束时间：</div>
              <div class="f12">{{order.meetingend_formatting}}</div>
          </div>
          <div class="flex-row" *ngIf="order.orderstatus=='B'">
            <div class="flex-1 margin-right"><button class="btn btn-primary btn-sm btn-block"
                (click)="startmeeting(order)">继续会诊</button></div>
            <div class="flex-1 margin-left"><button class="btn btn-warning btn-sm btn-block"
                (click)="endmeeting(order)">结束会诊</button></div>
          </div>
          <div *ngIf="order.orderstatus=='A'">
            <button class="btn btn-warning btn-sm btn-block" (click)="startmeeting(order)">开始会诊</button>
          </div>
        </div>
      </div>
      <div *ngIf="currentorder!=null">
        <div class="h3 mt-4 text-gray-800"><b>我的病人</b></div>
        <div class="order padding-20 bg-white margin-top">
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约人姓名：</div>
            <div class="f12">{{currentorder.patientname}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约人性别：</div>
            <div class="f12">{{currentorder.patientgender_name}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约时间：</div>
            <div class="f12">{{currentorder.ordertime_formatting}}</div>
          </div>
          <div class="flex-row">
            <div class="txt-gray f12 margin-right">预约状态：</div>
            <div class="f12">{{currentorder.orderstatus_name}}</div>
          </div>
          <div class="flex-row" *ngIf="currentorder.orderstatus=='B'||currentorder.orderstatus=='C'">
              <div class="txt-gray f12 margin-right">开始时间：</div>
              <div class="f12">{{currentorder.meetingstart_formatting}}</div>
          </div>
          <div class="flex-row" *ngIf="currentorder.orderstatus=='C'">
              <div class="txt-gray f12 margin-right">结束时间：</div>
              <div class="f12">{{currentorder.meetingend_formatting}}</div>
          </div>
          <div class="flex-row">
            <div class="flex-1 margin-left"><button class="btn btn-warning btn-sm btn-block"
                (click)="endmeeting(currentorder)">结束会诊</button></div>
          </div>
        </div>
      </div>
    </div>
    <div class=" padding-20" *ngIf="showtype==2">
      <div class="h3 mt-4 text-gray-800"><b>聊天记录</b></div>
    </div>
    <div class=" padding-20" *ngIf="showtype==3">
      <div class="h3 mt-4 text-gray-800"><b>设备设置</b></div>
      <div class="h5 mt-4 txt-bold">扬声器</div>
      <div class="form-group card border-bottom-primary padding-10 h6">
        {{speaker==null?"找不到设备":speaker.label}}
      </div>
      <div class="h5 mt-4 txt-bold">麦克风</div>
      <div class="form-group card border-bottom-primary padding-10 h6">
        {{mic==null?"找不到设备":mic.label}}
      </div>
      <div class="">
        <progressbar [value]="volume" [max]="0.5"></progressbar>
      </div>
      <div class="h5 mt-4 txt-bold">摄像头</div>
      <div class="form-group card border-bottom-primary padding-10 h6">
        {{camera==null?"找不到设备":camera.label}}
      </div>
      <!-- <div class="h5 mt-4 txt-bold">
        <button (click)='refreshDevices()' class="btn  btn-user btn-block btn-primary">
          刷新设备列表
        </button>
      </div> -->

    </div>

  </div>
